<div class="stackedit__html"><p><a href="http://terminalnotes.com/rewrite-rule#">http://terminalnotes.com/rewrite-rule#</a> Disable server side routing</p>
<h3 id="scenario">Scenario</h3>
<p>For a Single Page Applications (SPA), routing is client’s responsibility. For example, the URL <a href="http://www.website.com/category/post">www.website.com/category/post</a> for a SPA should load index.html located at document root on the server, instead of some file at root/category/post folder location.  Doing so requires disabling server side routing.</p>
<h3 id="solution">Solution</h3>
<p>This can be solved by introducing a RewriteRule in the apache configuration file. Key steps are:</p>
<ol>
<li>Locate Virtual host File</li>
<li>Add Rewrite rule</li>
<li>Restart Apache</li>
</ol>
<h4 id="locate-virtual-host-file">Locate virtual host file</h4>
<p>Virtual hosts file is present in apache conf folder. Browse to this location and open httpd-vhost.conf file</p>
<pre><code>cd /opt/bitnami/apache2/conf/extra
vi httpd-vhosts.conf
</code></pre>
<h4 id="add-rewrite-rule">Add rewrite rule</h4>
<p>Add a RewriteRule inside your websites’s VirtualHost tag wrapper</p>
<pre><code>RewriteEngine On
RewriteRule ^/[a-zA-Z0-9]+[/]?$ /index.html [QSA,L]
</code></pre>
<p>The above rewrite rule means that all urls of the form <a href="http://www.website.com/%5Banything%5D">www.website.com/[anything]</a> where [anything] could be any string made up of characters from a to z, A to Z and numbers from 0 to 9 would serve /index.html file.</p>
<p>Also, here QSA and L are RewriteRule flags. QSA stands for Query String Append and L stands for Last. To know about RewriteRule flags in detail, you can refer to the official apache documentation <a href="http://httpd.apache.org/docs/2.2/en/rewrite/flags.html">http://httpd.apache.org/docs/2.2/en/rewrite/flags.html</a></p>
<p>Here are some more useful regexes for RewriteRules:<br>
<code>RewriteRule ^(.+)$ /index.html</code> serve /index.html for all paths<br>
<code>RewriteRule ^/(.*)/key/(.*)$ /grouping/$1/subgrouping/$2</code><br>
If these don’t solve your scenario then you can get more help at <a href="http://httpd.apache.org/docs/2.2/en/rewrite/intro.html#regex">http://httpd.apache.org/docs/2.2/en/rewrite/intro.html#regex</a></p>
<p>Once the changes are made save the file. Your VirtualHost tag wrapper should now look something like:</p>
<pre><code>&lt;VirtualHost *:80&gt;
    DocumentRoot "/opt/bitnami/apache2/docs/www.website.com"
    ServerName website.com
    ServerAlias www.website.com
    RewriteEngine On
    RewriteRule ^/[a-zA-Z0-9]+[/]?$ /index.html [QSA,L]
    ErrorLog "logs/website.com-error_log"
    CustomLog "logs/www.website.com-access_log" common
&lt;/VirtualHost&gt;
</code></pre>
<h4 id="restart-apache">Restart Apache</h4>
<pre><code>sudo /opt/bitnami/ctlscript.sh restart apache
</code></pre>
<p>With restart, the changes would have taken effect. Open a sample URL to confirm.</p>
<p>Further Reading: <a href="https://www.terminalnotes.com/virtual-hosts">mutliple VirtualHosts</a>.</p>
</div>

